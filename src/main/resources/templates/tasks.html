<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>ÎŸÎ¹ Î•ÏÎ³Î±ÏƒÎ¯ÎµÏ‚ Î¼Î¿Ï…</title>
    <style>
        body { font-family: sans-serif; background-color: #f4f4f9; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        h2 { color: #333; }
        .header { display: flex; justify-content: space-between; align-items: center; }
        .logout-btn { background: #dc3545; color: white; text-decoration: none; padding: 8px 15px; border-radius: 5px; }

        /* Î¦ÏŒÏÎ¼Î± Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ·Ï‚ */
        .add-form { background: #e9ecef; padding: 15px; border-radius: 5px; margin-bottom: 20px; display: flex; gap: 10px; }
        input, select { padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        .btn-add { background: #28a745; color: white; border: none; padding: 8px 15px; cursor: pointer; border-radius: 4px;}

        /* Î Î¯Î½Î±ÎºÎ±Ï‚ */
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background-color: #007bff; color: white; }
        .status-completed { color: green; font-weight: bold; text-decoration: line-through; }
        .status-pending { color: orange; font-weight: bold; }

        .btn-action { text-decoration: none; padding: 5px 10px; border-radius: 3px; font-size: 0.9em; margin-right: 5px; }
        .btn-delete { background: #dc3545; color: white; }
        .btn-check { background: #17a2b8; color: white; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h2>Î›Î¯ÏƒÏ„Î± Î•ÏÎ³Î±ÏƒÎ¹ÏÎ½: <span th:text="${username}">User</span></h2>
        <a th:href="@{/logout}" class="logout-btn">Î‘Ï€Î¿ÏƒÏÎ½Î´ÎµÏƒÎ·</a>
    </div>

    <form th:action="@{/tasks}" method="get" style="margin: 20px 0;">
        <input type="text" name="keyword" placeholder="Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· ÎµÏÎ³Î±ÏƒÎ¯Î±Ï‚..." style="width: 70%;">
        <button type="submit" class="btn-add" style="background-color: #007bff;">Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ·</button>
        <a th:href="@{/tasks}" style="margin-left: 10px;">ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚</a>
    </form>

    <form th:action="@{/tasks}" th:object="${newTask}" method="post" class="add-form">
        <input type="text" th:field="*{title}" placeholder="Î¤Î¯Ï„Î»Î¿Ï‚ ÎµÏÎ³Î±ÏƒÎ¯Î±Ï‚" required style="flex: 2;">
        <input type="text" th:field="*{description}" placeholder="Î ÎµÏÎ¹Î³ÏÎ±Ï†Î®" style="flex: 2;">
        <input type="date" th:field="*{dueDate}" required>
        <select th:field="*{priority}">
            <option value="Low">Î§Î±Î¼Î·Î»Î®</option>
            <option value="Medium">ÎœÎµÏƒÎ±Î¯Î±</option>
            <option value="High">Î¥ÏˆÎ·Î»Î®</option>
        </select>
        <button type="submit" class="btn-add">Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ·</button>
    </form>

    <table>
        <thead>
        <tr>
            <th>Î¤Î¯Ï„Î»Î¿Ï‚</th>
            <th>Î ÏÎ¿Î¸ÎµÏƒÎ¼Î¯Î±</th>
            <th>Î ÏÎ¿Ï„ÎµÏÎ±Î¹ÏŒÏ„Î·Ï„Î±</th>
            <th>ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·</th>
            <th>Î•Î½Î­ÏÎ³ÎµÎ¹ÎµÏ‚</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="task : ${tasks}">
            <td th:text="${task.title}" th:class="${task.status == 'Completed' ? 'status-completed' : ''}"></td>
            <td th:text="${task.dueDate}"></td>
            <td th:text="${task.priority}"></td>
            <td>
                <span th:if="${task.status == 'Pending'}" class="status-pending">Î•ÎºÎºÏÎµÎ¼ÎµÎ¯</span>
                <span th:if="${task.status == 'Completed'}" style="color:green;">ÎŸÎ»Î¿ÎºÎ»Î·ÏÏÎ¸Î·ÎºÎµ</span>
            </td>
            <td>
                <a th:href="@{/tasks/toggle/{id}(id=${task.id})}" class="btn-action btn-check">âœ”</a>
                <a th:href="@{/tasks/delete/{id}(id=${task.id})}" class="btn-action btn-delete" onclick="return confirm('Î£Î¯Î³Î¿Ï…ÏÎ± Î¸Î­Î»ÎµÎ¹Ï‚ Î´Î¹Î±Î³ÏÎ±Ï†Î®;')">ğŸ—‘</a>
            </td>
        </tr>
        </tbody>
    </table>

    <div th:if="${tasks.empty}" style="text-align: center; margin-top: 20px; color: gray;">
        Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ ÎµÏÎ³Î±ÏƒÎ¯ÎµÏ‚. Î ÏÏŒÏƒÎ¸ÎµÏƒÎµ Î¼Î¯Î±!
    </div>
</div>

</body>
</html>